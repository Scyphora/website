---
import Button from '@components/ui/Button.astro';
---

<nav class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 backdrop-blur-md bg-space/30 border-b border-aurora/5" id="navbar">
  <div class="max-w-7xl mx-auto px-8 lg:px-16">
    <div class="flex items-center justify-between h-20 lg:h-24">

      <!-- Logo -->
      <a href="/" class="flex items-center group">
        <span class="text-2xl lg:text-3xl font-display font-bold text-aurora hover:text-pulse transition-colors duration-300">
          scyphora
        </span>
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center gap-12">
        <a href="#philosophy" class="text-base text-aurora-dark hover:text-aurora transition-colors duration-200">
          Philosophy
        </a>
        <a href="#solutions" class="text-base text-aurora-dark hover:text-aurora transition-colors duration-200">
          Solutions
        </a>
        <a href="#how-it-works" class="text-base text-aurora-dark hover:text-aurora transition-colors duration-200">
          How It Works
        </a>
        <a href="#about" class="text-base text-aurora-dark hover:text-aurora transition-colors duration-200">
          About
        </a>
        <a
          href="#contact"
          class="px-6 py-2.5 bg-pulse/10 border-2 border-pulse text-aurora rounded-lg font-medium shadow-lg shadow-pulse/40 hover:shadow-xl hover:shadow-pulse/60 hover:border-pulse-light transition-all duration-200 backdrop-blur-sm"
        >
          Contact
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <button
        class="lg:hidden relative w-10 h-10 flex items-center justify-center"
        id="mobile-menu-btn"
        aria-label="Toggle menu"
      >
        <div class="space-y-1.5">
          <span class="block w-6 h-0.5 bg-aurora dark:bg-aurora transition-all duration-300" id="line1" style="background: currentColor; color: #ffffff;"></span>
          <span class="block w-6 h-0.5 bg-aurora dark:bg-aurora transition-all duration-300" id="line2" style="background: currentColor; color: #ffffff;"></span>
          <span class="block w-6 h-0.5 bg-aurora dark:bg-aurora transition-all duration-300" id="line3" style="background: currentColor; color: #ffffff;"></span>
        </div>
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div
    class="lg:hidden fixed inset-0 top-20 transform translate-x-full transition-transform duration-300 ease-out"
    id="mobile-menu"
  >
    <div class="h-screen max-w-7xl mx-auto px-8 py-12 bg-aurora dark:bg-space/95 backdrop-blur-md border-t border-aurora/10">
      <nav class="flex flex-col gap-8">
        <a
          href="#philosophy"
          class="text-2xl font-medium text-aurora-dark hover:text-aurora  transition-colors duration-200 py-2"
        >
          Philosophy
        </a>
        <a
          href="#solutions"
          class="text-2xl font-medium text-aurora-dark hover:text-aurora transition-colors duration-200 py-2"
        >
          Solutions
        </a>
        <a
          href="#how-it-works"
          class="text-2xl font-medium text-aurora-dark hover:text-aurora transition-colors duration-200 py-2"
        >
          How It Works
        </a>
        <a
          href="#about"
          class="text-2xl font-medium text-aurora-dark hover:text-aurora transition-colors duration-200 py-2"
        >
          About
        </a>
        <a
          href="#contact"
          class="mt-4 px-8 py-4 bg-pulse/10 border-2 border-pulse text-aurora rounded-lg font-semibold text-lg text-center shadow-lg shadow-pulse/40 hover:shadow-xl hover:shadow-pulse/60 hover:border-pulse-light transition-all duration-200 backdrop-blur-sm"
        >
          Contact
        </a>
      </nav>
    </div>
  </div>
</nav>

<script>
  const navbar = document.getElementById('navbar');
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const line1 = document.getElementById('line1');
  const line2 = document.getElementById('line2');
  const line3 = document.getElementById('line3');

  let isMenuOpen = false;

  // Navbar scroll effect
  window.addEventListener('scroll', () => {
    if (window.scrollY > 20) {
      navbar?.classList.add('bg-space/80', 'shadow-lg', 'border-aurora/10');
      navbar?.classList.remove('bg-space/30', 'border-aurora/5');
    } else {
      navbar?.classList.remove('bg-space/80', 'shadow-lg', 'border-aurora/10');
      navbar?.classList.add('bg-space/30', 'border-aurora/5');
    }
  });

  // Mobile menu toggle with animated hamburger
  mobileMenuBtn?.addEventListener('click', () => {
    isMenuOpen = !isMenuOpen;

    if (isMenuOpen) {
      // Transform to X
      mobileMenu?.classList.remove('translate-x-full');
      line1?.classList.add('rotate-45', 'translate-y-2');
      line2?.classList.add('opacity-0');
      line3?.classList.add('-rotate-45', '-translate-y-2');
    } else {
      // Transform back to hamburger
      mobileMenu?.classList.add('translate-x-full');
      line1?.classList.remove('rotate-45', 'translate-y-2');
      line2?.classList.remove('opacity-0');
      line3?.classList.remove('-rotate-45', '-translate-y-2');
    }
  });

  // Close mobile menu when clicking on a link
  const mobileLinks = mobileMenu?.querySelectorAll('a');
  mobileLinks?.forEach((link) => {
    link.addEventListener('click', () => {
      isMenuOpen = false;
      mobileMenu?.classList.add('translate-x-full');
      line1?.classList.remove('rotate-45', 'translate-y-2');
      line2?.classList.remove('opacity-0');
      line3?.classList.remove('-rotate-45', '-translate-y-2');
    });
  });

  // Close menu when clicking outside
  document.addEventListener('click', (e) => {
    if (isMenuOpen && !mobileMenu?.contains(e.target as Node) && !mobileMenuBtn?.contains(e.target as Node)) {
      isMenuOpen = false;
      mobileMenu?.classList.add('translate-x-full');
      line1?.classList.remove('rotate-45', 'translate-y-2');
      line2?.classList.remove('opacity-0');
      line3?.classList.remove('-rotate-45', '-translate-y-2');
    }
  });
</script>
